syntax = "proto3";

package cosmos.accounts.defaults.multisig.v1;

import "google/protobuf/any.proto";
import "cosmos/msg/v1/msg.proto";
import "cosmos_proto/cosmos.proto";

option go_package = "cosmossdk.io/x/accounts/defaults/multisig/v1";

// MsgInit is used to initialize a multisig account.
message MsgInit {
  // pub_key defines the pubkey bytes of the multisig members. If the signing algo is "default"
  // then these are addresses and not pubkeys.
  repeated bytes pub_keys = 1;

  repeated uint64 weights = 2;

  Config Config = 3;
}

// when aggregating on-chain I can only use the address
// off-chain would send a tx directly, won't create a proposal.

message Config {
  int64 threshold = 1;

  int64 quorum = 2;

  // voting_period is the duration in seconds for the voting period.
  int64 voting_period = 3;

  // revote defines if members can change their vote.
  bool revote = 4;

  // early_execution defines if the multisig can be executed before the voting period ends.
  bool early_execution = 5;
}

message Proposal {
  string   title                        = 1;
  string   summary                      = 2;
  repeated google.protobuf.Any messages = 3;

  // if true, the proposal will execute as soon as the quorum is reached.
  bool execute = 4;
}

// MsgInitResponse is the response returned after base account initialization.
// This is empty.
message MsgInitResponse {}

message MsgCreateProposal {
  Proposal proposal = 1;
}

// MsgUpdateConfigRequest is used to change the config or members.
message MsgUpdateConfigRequest {
  // only the members that are changing are required, if their weight is 0, they are removed.
  repeated bytes update_pub_keys = 1;

  repeated uint64 update_weights = 2;

  // not all fields from Config can be changed
  Config Config = 3;
}

// MsgSwapPubKeyResponse is the response for the MsgSwapPubKey message.
// This is empty.
message MsgUpdateConfigResponse {}

// QuerySequence is the request for the account sequence.
message QuerySequence {}

// QuerySequenceResponse returns the sequence of the account.
message QuerySequenceResponse {
  // sequence is the current sequence of the account.
  uint64 sequence = 1;
}

message QueryConfig {}

// QuerySequenceResponse returns the sequence of the account.
message QueryConfigResponse {
  // pub_key defines the pubkey bytes of the multisig members.
  repeated bytes pub_keys = 1;

  repeated uint64 weights = 2;

  Config Config = 3;
}

message QueryProposal {
  uint64 proposal_id = 1;
}

message QueryProposalResponse {
  Proposal proposal = 1;
}

message MsgVote {
  uint64 proposal_id = 1;
  bool   vote        = 2;
}

message MsgVoteResponse {}

message MsgExecuteProposal {
  uint64 proposal_id = 1;
}

message MsgExecuteProposalResponse {}